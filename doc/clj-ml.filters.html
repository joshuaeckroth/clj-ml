<!DOCTYPE html>
<html><head><link href="css/default.css" rel="stylesheet" type="text/css"><script src="js/jquery.min.js" type="text/javascript"></script><script src="js/page_effects.js" type="text/javascript"></script><title>clj-ml.filters documentation</title></head><body><div id="header"><h2>Generated by <a href="https://github.com/weavejester/codox">Codox</a></h2><h1><a href="index.html">Clj-ml 0.4.0-SNAPSHOT API documentation</a></h1></div><div class="sidebar" id="namespaces"><h3><span>Namespaces</span></h3><ul><li><a href="clj-ml.attribute-selection.html"><span>clj-ml.attribute-selection</span></a></li><li><a href="clj-ml.classifiers.html"><span>clj-ml.classifiers</span></a></li><li><a href="clj-ml.clusterers.html"><span>clj-ml.clusterers</span></a></li><li><a href="clj-ml.data.html"><span>clj-ml.data</span></a></li><li><a href="clj-ml.distance-functions.html"><span>clj-ml.distance-functions</span></a></li><li class="current"><a href="clj-ml.filters.html"><span>clj-ml.filters</span></a></li><li><a href="clj-ml.io.html"><span>clj-ml.io</span></a></li><li><a href="clj-ml.kernel-functions.html"><span>clj-ml.kernel-functions</span></a></li><li><a href="clj-ml.options-utils.html"><span>clj-ml.options-utils</span></a></li><li><a href="clj-ml.public-datasets.html"><span>clj-ml.public-datasets</span></a></li><li><a href="clj-ml.utils.html"><span>clj-ml.utils</span></a></li></ul></div><div class="sidebar" id="vars"><h3>Public Vars</h3><ul><li><a href="clj-ml.filters.html#var-attribute-types"><span>attribute-types</span></a></li><li><a href="clj-ml.filters.html#var-deffilter"><span>deffilter</span></a></li><li><a href="clj-ml.filters.html#var-filter-aliases"><span>filter-aliases</span></a></li><li><a href="clj-ml.filters.html#var-filter-apply"><span>filter-apply</span></a></li><li><a href="clj-ml.filters.html#var-make-apply-filter"><span>make-apply-filter</span></a></li><li><a href="clj-ml.filters.html#var-make-apply-filters"><span>make-apply-filters</span></a></li><li><a href="clj-ml.filters.html#var-make-filter"><span>make-filter</span></a></li></ul></div><div class="namespace-docs" id="content"><h2>clj-ml.filters documentation</h2><pre class="doc">This namespace defines a set of functions that can be applied to data sets to modify the
dataset in some way: transforming nominal attributes into binary attributes, removing
attributes etc.

There are a number of ways to use the filtering API.  The most straight forward and
idomatic clojure way is to use the provided filter fns:

  ;; ds is the dataset
  (def ds (make-dataset :test [:a :b {:c [:g :m]}]
                                  [ [1 2 :g]
                                    [2 3 :m]
                                    [4 5 :g]]))
  (def filtered-ds
     (-&gt; ds
         (add-attribute {:type :nominal, :column 1, :name &quot;pet&quot;, :labels [&quot;dog&quot; &quot;cat&quot;]})
         (remove-attributes {:attributes [:a :c]})))


The above functions rely on lower level fns that create and apply the filters which you may
also use if you need more control over the actual filter objects:

  (def filter (make-filter :remove-attributes {:dataset-format ds :attributes [:a :c]}))


  ;; We apply the filter to the original data set and obtain the new one
  (def filtered-ds (filter-apply filter ds))


The previous sample of code could be rewritten with the make-apply-filter function:

  (def filtered-ds (make-apply-filter :remove-attributes {:attributes [:a :c]} ds))</pre><div class="public" id="var-attribute-types"><h3>attribute-types</h3><div class="usage"></div><pre class="doc">Mapping of Weka's attribute types from clj-ml keywords to the -T flag's representation.
</pre><div class="src-link"><a href="http://github.com/joshuaeckroth/clj-ml/blob/master/src/clj_ml/filters.clj#L144">Source</a></div></div><div class="public" id="var-deffilter"><h3>deffilter</h3><h4 class="macro">macro</h4><div class="usage"><code>(deffilter filter-name)</code></div><pre class="doc">Defines the filter's fn that creates a fn to make and apply the filter.
</pre><div class="src-link"><a href="http://github.com/joshuaeckroth/clj-ml/blob/master/src/clj_ml/filters.clj#L55">Source</a></div></div><div class="public" id="var-filter-aliases"><h3>filter-aliases</h3><div class="usage"></div><pre class="doc">Mapping of cjl-ml keywords to actual Weka classes
</pre><div class="src-link"><a href="http://github.com/joshuaeckroth/clj-ml/blob/master/src/clj_ml/filters.clj#L230">Source</a></div></div><div class="public" id="var-filter-apply"><h3>filter-apply</h3><div class="usage"><code>(filter-apply filter dataset)</code></div><pre class="doc">Filters an input dataset using the provided filter and generates an output dataset. The
first argument is a filter and the second parameter the data set where the filter should
be applied.</pre><div class="src-link"><a href="http://github.com/joshuaeckroth/clj-ml/blob/master/src/clj_ml/filters.clj#L582">Source</a></div></div><div class="public" id="var-make-apply-filter"><h3>make-apply-filter</h3><div class="usage"><code>(make-apply-filter kind options dataset)</code></div><pre class="doc">Creates a new filter with the provided options and apply it to the provided dataset.
The :dataset-format attribute for the making of the filter will be setup to the
dataset passed as an argument if no other value is provided.

The application of this filter is equivalent to the consecutive application of
make-filter and apply-filter.</pre><div class="src-link"><a href="http://github.com/joshuaeckroth/clj-ml/blob/master/src/clj_ml/filters.clj#L589">Source</a></div></div><div class="public" id="var-make-apply-filters"><h3>make-apply-filters</h3><div class="usage"><code>(make-apply-filters filter-options dataset)</code></div><pre class="doc">Creates new filters with the provided options and applies them to the provided dataset.
The :dataset-format attribute for the making of the filter will be setup to the
dataset passed as an argument if no other value is provided.</pre><div class="src-link"><a href="http://github.com/joshuaeckroth/clj-ml/blob/master/src/clj_ml/filters.clj#L601">Source</a></div></div><div class="public" id="var-make-filter"><h3>make-filter</h3><div class="usage"><code>(make-filter kind options)</code></div><pre class="doc">Creates a filter for the provided attributes format. The first argument must be a symbol
identifying the kind of filter to generate.
Currently the following filters are supported:

  - :supervised-discretize
  - :unsupervised-discretize
  - :pki-unsupervised-discretize
  - :supervised-nominal-to-binary
  - :unsupervised-nominal-to-binary
  - :numeric-to-nominal
  - :string-to-word-vector
  - :add-attribute
  - :reorder-attributes
  - :remove-attributes
  - :remove-percentage
  - :remove-range
  - :remove-useless-attributes
  - :resample-unsupervised
  - :resample-supervised
  - :select-append-attributes
  - :project-attributes
  - :clj-streamable
  - :clj-batch

 The second parameter is a map of attributes for the filter.
 All filters require a :dataset-format parameter:

     - :dataset-format
         The dataset where the filter is going to be applied or a
         description of the format of its attributes. Sample value:
         dataset, (dataset-format dataset)

 An example of usage:

   (make-filter :remove {:attributes [0 1] :dataset-format dataset})

 Documentation for the different filters:

 * :supervised-discretize

   An instance filter that discretizes a range of numeric attributes
   in the dataset into nominal attributes. Discretization is by Fayyad
   &amp; Irani's MDL method (the default).

   Parameters:

     - :attributes
         Index of the attributes to be discretized, sample value: [0,4,6]
         The attributes may also be specified by names as well: [:some-name, &quot;another-name&quot;]
     - :invert
         Invert mathcing sense of the columns, sample value: true
     - :kononenko
         Use Kononenko's MDL criterion, sample value: true

 * :unsupervised-discretize

   Unsupervised version of the discretize filter. Discretization is by simple
   binning.

   Parameters:

     - :attributes
         Index of the attributes to be discretized, sample value: [0,4,6]
         The attributes may also be specified by names as well: [:some-name, &quot;another-name&quot;]
     - :unset-class
         Does not take class attribute into account for the application
         of the filter, sample-value: true
     - :binary
     - :equal-frequency
         Use equal frequency instead of equal width discretization, sample
         value: true
     - :optimize
         Optmize the number of bins using leave-one-out estimate of
         estimated entropy. Ingores the :binary attribute. sample value: true
     - :number-bins
         Defines the number of bins to divide the numeric attributes into
         sample value: 3


 * :pki-unsupervised-discretize

   Discretizes numeric attributes using equal frequency binning, where the number of bins is
   equal to the square root of the number of non-missing values.

   Parameters:

     - :attributes
         Index of the attributes to be discretized, sample value: [0,4,6]
         The attributes may also be specified by names as well: [:some-name, &quot;another-name&quot;]
     - :unset-class
         Does not take class attribute into account for the application
         of the filter, sample-value: true
     - :binary

 * :supervised-nominal-to-binary

   Converts nominal attributes into binary numeric attributes. An attribute with k values
   is transformed into k binary attributes if the class is nominal.

   Parameters:
     - :also-binary
         Sets if binary attributes are to be coded as nominal ones, sample value: true
     - :for-each-nominal
         For each nominal value one binary attribute is created, not only if the
         values of the nominal attribute are greater than two.

 * :unsupervised-nominal-to-binary

   Unsupervised version of the :nominal-to-binary filter

   Parameters:

     - :attributes
         Index of the attributes to be binarized. Sample value: [0 1 2]
         The attributes may also be specified by names as well: [:some-name, &quot;another-name&quot;]
     - :also-binary
         Sets if binary attributes are to be coded as nominal ones, sample value: true
     - :for-each-nominal
         For each nominal value one binary attribute is created, not only if the
         values of the nominal attribute are greater than two., sample value: true

 * :numeric-to-nominal

   Transforms numeric attributes into nominal ones.

   Parameters:

     - :attributes
         Index of the attributes to be transformed. Sample value: [0 1 2]
         The attributes may also be specified by names as well: [:some-name, &quot;another-name&quot;]
     - :invert
         Invert the selection of the columns. Sample value: true

 * :string-to-word-vector

   TODO

 * :add-attribute

   Adds a new attribute to the dataset. The new attribute will contain all missing values.

   Parameters:

     - :type
         Type of the new attribute. Valid options: :numeric, :nominal, :string, :date. Defaults to :numeric.
     - :name
         Name of the new attribute.
     - :column
         Index of where to insert the attribute, indexed by 0. You may also pass in &quot;first&quot; and &quot;last&quot;.
         Sample values: &quot;first&quot;, 0, 1, &quot;last&quot;
         The default is: &quot;last&quot;
     - :labels
         Vector of valid nominal values. This only applies when the type is :nominal.
     - :format
         The format of the date values (see ISO-8601).  This only applies when the type is :date.
         The default is: &quot;yyyy-MM-dd'T'HH:mm:ss&quot;

 * :reorder-attributes

   Reorder attributes.

   Parameters:

     - :attributes
         New ordering of the attributes. Sample value: [&quot;2-last&quot; &quot;1&quot;],
         which moves the attribute currently at position 1 to the end.
         Be sure to quote all attributes so that number indexes are not
         automatically incremented by 1 (Weka indexes start at 1).

 * :remove-attributes

   Remove some columns from the data set after the provided attributes.

   Parameters:

     - :attributes
         Index of the attributes to remove. Sample value: [0 1 2]
         The attributes may also be specified by names as well: [:some-name, &quot;another-name&quot;]

 * :remove-useless-attributes

    Remove attributes that do not vary at all or that vary too much. All constant
    attributes are deleted automatically, along with any that exceed the maximum percentage
    of variance parameter. The maximum variance test is only applied to nominal attributes.

  Parameters:

     - :max-variance
         Maximum variance percentage allowed (default 99).
         Note: percentage, not decimal. e.g. 89 not 0.89
         If you pass in a decimal Weka silently sets it to 0.0.

 * :resample-unsupervised

   &quot;Produces a random subsample of a dataset using either sampling
   with replacement or without replacement. The original dataset
   must fit entirely in memory. The number of instances in the
   generated dataset may be specified. When used in batch mode,
   subsequent batches are NOT resampled.&quot; -- from Weka JavaDoc.

   Parameters:

     - :seed
       Random number seed (integer)

     - :size-percent
       &quot;The size of the output dataset, as a percentage of
       the input dataset (default 100)&quot; (integer)

     - :no-replacement
       Use replacement or not; default is false, i.e., with replacement (boolean)

     - :invert
       Inverts the selection; can only be true if :replacement is false (boolean)

 * :resample-supervised

   &quot;Produces a random subsample of a dataset using either sampling
   with replacement or without replacement. The original dataset
   must fit entirely in memory. The number of instances in the
   generated dataset may be specified. The dataset must have a
   nominal class attribute. If not, use the unsupervised
   version. The filter can be made to maintain the class
   distribution in the subsample, or to bias the class distribution
   toward a uniform distribution. When used in batch mode (i.e. in
   the FilteredClassifier), subsequent batches are NOT resampled.&quot;
   -- from Weka JavaDoc.

   Parameters:

     - :seed
       Random number seed (integer)

     - :size-percent
       &quot;The size of the output dataset, as a percentage of
       the input dataset (default 100)&quot; (integer)

     - :bias &quot;Bias factor towards uniform class distribution.0 =
       distribution in input data -- 1 = uniform
       distribution. (default 0)&quot; (0 or 1)

     - :no-replacement
       Use replacement or not; default is false, i.e., with replacement (boolean)

     - :invert
       Inverts the selection; can only be true if :replacement is false (boolean)

 * :select-append-attributes

   Append a copy of the selected columns at the end of the dataset.

   Parameters:

     - :attributes
         Index of the attributes. Sample value: [1 2 3]
         The attributes may also be specified by names as well: [:some-name, &quot;another-name&quot;]
     - :invert
         Invert the selection of the columns. Sample value: true

 * :project-attributes

   Project some columns from the provided dataset

   Parameters:

     - :invert
         Invert the selection of columns. Sample value: true

   * :clj-streamable

   Allows you to create a custom streamable filter with clojure functions.
   A streamable filter is appropriate when you don't need to iterate over
   the entire dataset before processing it.

   Parameters:

     - :process
         This function will receive individual weka.core.Instance objects (rows
         of the dataset) and should return a newly processed Instance. The
         actual Instance is passed in and you may change it directly. However, a better
         approach is to copy the Instance with the copy method or Instance
         constructor and return a modified version of the copy.
     - :determine-dataset-format
         This function will receive the dataset's weka.core.Instances object with
         no actual Instance objects (i.e. just the format enocded in the attributes).
         You must return a Instances object that contains the new format of the
         filtered dataset.  Passing this fn is optional.  If you are not changing
         the format of the dataset then by omitting a function will use the
         current format.

   * :clj-batch

   Allows you to create a custom batch filter with clojure functions.
   A batch filter is appropriate when you need to iterate over
   the entire dataset before processing it.

   Parameters:

     - :process
         This function will receive the entire dataset as a weka.core.Instances
         objects.  A processed Instances object should be returned with the
         new Instance objects added to it.  The format of the dataset (Instances)
         that is returned from this will be returned from the filter (see below).
     - :determine-dataset-format
         This function will receive the dataset's weka.core.Instances object with
         no actual Instance objects (i.e. just the format enocded in the attributes).
         You must return a Instances object that contains the new format of the
         filtered dataset.  Passing this fn is optional.
         For many batch filters you need to process the entire dataset to determine
         the correct format (e.g. filters that operate on nominal attributes). For
         this reason the clj-batch filter will *always* use format of the dataset
         that the process fn outputs.  In other words, if you need to operate on the
         entire dataset before determining the format then this should be done in the
         process-fn and nothing needs to be passed for this fn.

For examples on how to use the filters, especially the clojure filters, you may
refer to filters_test.clj of clj-ml.</pre><div class="src-link"><a href="http://github.com/joshuaeckroth/clj-ml/blob/master/src/clj_ml/filters.clj#L251">Source</a></div></div></div></body></html>